<template name="elementDetails">
    <div class="container">
        {{#if Template.subscriptionsReady}}
            {{#with element}}
            <div class="row">
                <div class="col-xs-2">
                    <a href="/elements" class="btn btn-default"><i class="fa fa-chevron-left" aria-hidden="true"></i> Voltar</a>
                </div>
                <div class="col-xs-10">
                    <span class="pull-right">
                        <button class="btn btn-primary js-showEditElementModal">Editar</button>
                        {{#if formType.hasCalibration }}
                            <button class="btn btn-success js-addCalibrationModal">Calibração</button>
                        {{/if}}
                        {{#if formType.hasSetpoint }}
                            <button class="btn btn-success js-addVerificationModal">Verificação</button>
                        {{/if}}
                        {{#if formType.hasMaintenance }}
                            <button class="btn btn-success js-addMaintenanceModal">Manutenção</button>
                        {{/if}}
                    </span>
                </div>
            </div>
            <hr/>
            <div class="row">
                <div class="col-md-6">
                    <table class="table table-bordered">
                        <tbody>
                            <tr><td>Numero:</td><td><strong>{{elementId}}</strong></td></tr>
                            <tr><td>Tipo:</td><td>{{elementType}}</td></tr>
                            <tr><td>Marca:</td><td>{{manufacturer}}</td></tr>
                            <tr><td>Modelo:</td><td>{{model}}</td></tr>
                            <tr><td>Número Série:</td><td>{{serialNumber}}</td></tr>
                            <tr><td>Localização:</td><td>{{location}}</td></tr>
                            <tr><td>Uso:</td><td>{{use}}</td></tr>
                            <tr><td>Data de compra:</td><td>{{purchasingDate}}</td></tr>
                            {{#if formType.hasCalibration }}
                                <tr><td>Limite Inferior:</td><td>{{bottomLimit}}</td></tr>
                                <tr><td>Classe de precisão:</td><td>{{precisionClass}}</td></tr>
                                <tr><td>Gama de medida:</td><td>{{rangeMeasure}}</td></tr>
                                <tr><td>Gama de uso:</td><td>{{rangeUse}}</td></tr>
                                <tr><td>Escala:</td><td>{{scale}}</td></tr>
                                <tr><td>Resolução:</td><td>{{resolution}}</td></tr>
                                <tr><td>Unidades:</td><td>{{units}}</td></tr>
                                <tr><td>Critério de Não Conformidade:</td><td>{{noConform}}</td></tr>
                                <tr><td>Valor de Não Conformidade:</td><td>{{noConformValue}}</td></tr>
                                <tr><td>Digital:</td><td>{{isDigitalTranslated}}</td></tr>
                                <tr><td>OBS: {{memo}}</td></tr>
                            {{/if}}
                            {{#if formType.hasSetpoint }}
                                <tr><td>Disparo / Setpoint:</td><td>{{setPoint}}</td></tr>
                                <tr><td>Gama de medida:</td><td>{{rangeMeasure}}</td></tr>
                                <tr><td>Unidades:</td><td>{{units}}</td></tr>
                                <tr><td>Critério de Não Conformidade:</td><td>{{noConform}}</td></tr>
                                <tr><td>Valor de Não Conformidade:</td><td>{{noConformValue}}</td></tr>                                
                                <tr><td>OBS: {{memo}}</td></tr>
                            {{/if}}
                            {{#if formType.hasMaintenance }}
                                <tr><td>Capacidade:</td><td>{{capacity}}</td></tr>
                                <tr><td>Fornecedor:</td><td>{{supplier}}</td></tr>
                                <tr><td>Consumíveis:</td><td>{{supplies}}</td></tr>
                                <tr><td>OBS: {{memo}}</td></tr>
                            {{/if}}
                        </tbody>
                    </table>
                </div>
                <div class="col-md-6">
                    <table class="table table-bordered">
                        <tbody>
                            {{#if formType.hasCalibration }}
                                <tr><td>Frequência Calibração:</td><td>{{frequencyMonths}} Meses</td></tr>
                            {{/if}}
                            {{#if formType.hasSetpoint }}
                                <tr><td>Frequência Verificação:</td><td>{{frequencyMonths}} Meses</td></tr>
                            {{/if}}
                            {{#if formType.hasMaintenance }}
                                <tr><td>Frequência Manutenção (Meses):</td><td>{{frequencyMonths}} Meses</td></tr>
                                <tr><td>Frequência Manutenção (Horas):</td><td>{{frequencyHours}} Horas</td></tr>
                            {{/if}}
                        </tbody>
                    </table>
                </div>
            </div>
            {{/with}}
        {{else}}
            <p>Loading...</p>
        {{/if}}
    </div>
</template>

<template name="editElementModal">
    <div class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Editar Elemento</h4>
                </div>
                {{#autoForm collection=elements id='editElementForm' type='method-update' meteormethod='updateElement' doc=this singleMethodArgument=true}}
                <div class="modal-body">
                    {{#if duplicateAlert}}
                        <div class="alert alert-warning" role="alert">Atenção, o elemento com esse número já existe!</div>
                    {{/if}}
                    <div class="row">
                        {{> afQuickField name='elementType' formgroup-class="col-xs-7" disabled='true'}}
                        <div class="form-group col-xs-1">
                            <label class="control-label"></label>
                            <p class="form-control-static"><strong>{{ elementInitials }}</strong></p>
                        </div>
                        {{> afQuickField name='elementNumber' formgroup-class='col-xs-3'}}
                    </div>
                    <div class="row">
                        {{> afQuickField name='manufacturer' formgroup-class='col-xs-4'}}
                        {{> afQuickField name='model' formgroup-class='col-xs-4'}}
                        {{> afQuickField name='serialNumber' formgroup-class='col-xs-4'}}
                    </div>
                    {{#if formType.hasCalibration }}
                        <div class="row">
                            <div class="col-xs-4">
                                {{> afQuickField name='frequencyMonths' label='Freq. Calibração' placeholder='(Meses)'}}
                                {{> afQuickField name='bottomLimit'}}
                                {{> afQuickField name='precisionClass'}}
                                {{> afQuickField name='rangeMeasure'}}
                                {{> afQuickField name='rangeUse'}}
                                {{> afQuickField name='scale' }}
                                {{> afQuickField name='resolution'}}
                            </div>
                            <div class="col-xs-8">
                                {{> afQuickField name='location'}}
                                {{> afQuickField name='use'}}
                                {{> afQuickField name='noConform'}}
                                {{> afQuickField name='noConformValue' placeholder='Numero'}}
                                {{> afQuickField name='purchasingDate' }}
                                {{> afQuickField name='units' }}
                                {{> afQuickField name='isDigital' }}
                            </div>
                        </div>
                    {{/if}}
                    {{#if formType.hasSetpoint}}
                        <div class="row">
                            <div class="col-xs-4">
                                {{> afQuickField name='frequencyMonths' label='Freq. Verificação' placeholder='(Meses)'}}
                                {{> afQuickField name='rangeMeasure'}}
                                {{> afQuickField name='setPoint' placeholder='Numero'}}
                                {{> afQuickField name='noConformValue' placeholder='Percentagem permitida'}}
                                {{> afQuickField name='purchasingDate' }}
                            </div>
                            <div class="col-xs-8">
                                {{> afQuickField name='location'}}
                                {{> afQuickField name='use'}}
                                {{> afQuickField name='units' }}
                                {{> afQuickField name='noConform'}}
                            </div>
                        </div>
                    {{/if}}
                    {{#if formType.hasMaintenance }}
                        <div class="row">
                            <div class="col-xs-4">
                                {{> afQuickField name='frequencyMonths' label='Freq. Revisão' placeholder='(Meses)'}}
                                {{> afQuickField name='frequencyHours' label='Freq. Revisão' placeholder='(Horas)'}}
                                {{> afQuickField name='purchasingDate' }}
                            </div>
                            <div class="col-xs-8">
                                {{> afQuickField name='use'}}
                                {{> afQuickField name='location'}}
                                {{> afQuickField name='capacity' }}
                            </div>
                        </div>
                    {{/if}}
                </div>
            
                <div class="modal-footer">
                    {{#if manager}}
                        <button type="button" class="btn btn-danger js-removeElement" data-dismiss="modal">Eliminar Elemento</button>
                    {{/if}}
                    <button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
                {{/autoForm}}
            </div>
        </div>
    </div>
</template>